window.vc_iframe = {
  scripts_to_wait: 0,
  time_to_call: !1,
  ajax: !1,
  activities_list: [],
  scripts_to_load: !1,
  loaded_script: {},
  loaded_styles: {},
  inline_scripts: [],
  inline_scripts_body: []
},
function(p) {
  window.vc_iframe.showNoContent = function(e) {
      var t = p("#vc_no-content-helper");
      !1 === e ? (t.addClass("vc_not-empty"), p("#vc_navbar").addClass("vc_not-empty")) : (t.removeClass("vc_not-empty"), p("#vc_navbar").removeClass("vc_not-empty"))
  }, window.vc_iframe.scrollTo = function(e) {
      var t, a, o = p(window).height(),
          i = p(window).scrollTop();
      if (e && (e = p("[data-model-id=" + e + "]"))) {
          if (!1 === (a = !!(a = e.offset()) && a.top)) return !1;
          t = e.height(), (i + o < a || a + t < i) && p.scrollTo(e, 500, {
              offset: -50
          })
      }
  }, window.vc_iframe.startSorting = function() {
      p("body").addClass("vc_sorting");
       /*nectar addition */
       jQuery(window).trigger("nectar-frontend-sorting-start");
       /*nectar addition end */
  }, window.vc_iframe.stopSorting = function() {
      p("body").removeClass("vc_sorting")
       /*nectar addition */
       jQuery(window).trigger('nectar-frontend-sorting-stop');
       jQuery('.container-wrap').css('pointer-events','auto');
       //to fix full width content etc
       jQuery(window).trigger('smartresize');
       
       vc_iframe.reload();
 
       //vc col mobile fixes
       jQuery('.wpb_row').each(function(){
         if(typeof jQuery(this).find('.span_12').offset() != 'undefined' ) {
         
           jQuery(this).find('[class*="vc_col-"]').each(function(){
     
             var $firstChildOffset = jQuery(this).parents('.span_12').offset().left;
             
             jQuery(this).removeClass('no-left-margin');
             if(jQuery(this).offset().left < $firstChildOffset + 27) { 
               jQuery(this).addClass('no-left-margin');
             } else {
               jQuery(this).removeClass('no-left-margin');
             }
           });
         }
       });
       /*nectar addition end */
  }, window.vc_iframe.initDroppable = function() {
      p("body").addClass("vc_dragging"), p(".vc_container-block").on("mouseenter.vcDraggable", function() {
          p(this).addClass("vc_catcher")
      }).on("mouseout.vcDraggable", function() {
          p(this).removeClass("vc_catcher")
      })
  }, window.vc_iframe.killDroppable = function() {
      p("body").removeClass("vc_dragging"), p(".vc_container-block").off("mouseover.vcDraggable mouseleave.vcDraggable")
  }, window.vc_iframe.addActivity = function(e) {
      this.activities_list.push(e)
  }, 
     /*nectar addition*/
  window.vc_iframe.renderPlaceholder = function(event, element) {
    jQuery('.container-wrap').css('pointer-events','none');
    jQuery('.nectar-vc-el-outline-active').removeClass('nectar-vc-el-outline-active');
        var tag = jQuery(element).data("tag"),
            is_container = parent.vc.map[tag] === Object(parent.vc.map[tag]) && ((!0 === parent.vc.map[tag].is_container || !1 === parent.vc.map[tag].is_container || "[object Boolean]" === toString.call(parent.vc.map[tag].is_container)) && !0 === parent.vc.map[tag].is_container || null != parent.vc.map[tag].as_parent && "[object Array]" === Object.prototype.toString.call(parent.vc.map[tag].as_parent) && 0 != parent.vc.map[tag].as_parent);
        /*nectar addition - just adding wrapping span for text */ 
        return jQuery('<div class="vc_helper vc_helper-' + tag + '"><i class="vc_general vc_element-icon' + (parent.vc.map[tag].icon ? " " + parent.vc.map[tag].icon : "") + '"' + (is_container ? ' data-is-container="true"' : "") + "></i> <span>" + parent.vc.map[tag].name + "</span></div>").prependTo("body")
       
  },
/*nectar addition end*/
  window.vc_iframe.setSortable = function(e) {
      var r, s, d, a, o, i, l = window.vc_iframe,
          _ = (parent.vc.$page.addClass("vc-main-sortable-container"), p(parent.vc.$page));
        
      //nectar addition - full page row ordering
      var app = e;
      var FPstartingIndex = 0, FPendingIndex = 0;
      setTimeout(function() {
       jQuery('#fp-nav ul').sortable({
           placeholder: "vc_placeholder-FPR",
           cancel: '.vc_add_new_row',
           items: "> li:not(.vc_add_new_row)",
           start:  function(event, ui) {
             
               //store starting index for use when ending the reorder
               FPstartingIndex = ui.item.index() + 1;
               
           },
           stop: function(event, ui) {
             
             //store new (ending) index
             FPendingIndex = ui.item.index();
             
             //move the rows based on collected indexes
             var FProwToMove = jQuery('#nectar_fullscreen_rows > .vc_element:nth-child('+FPstartingIndex+')').detach();
             
             if(FPendingIndex === 0) {
               jQuery('#nectar_fullscreen_rows').prepend(FProwToMove);
             } else {
               FProwToMove.insertAfter( jQuery('#nectar_fullscreen_rows > .vc_element:nth-child('+FPendingIndex+')') );
             }
             
             
             //reset it all
             vc_iframe.reload();
             
             // used to reinit sortable
             setTimeout(function() { 
               window.vc_iframe.setSortable(app)
             },400);
             
           },
           update: function(event, ui) {

             //mimic obj that would normally be passed
             var rowEmulatinoObj = {
               item : jQuery('#nectar_fullscreen_rows > div:first-child')
             }
              parent.vc.app.saveRowOrder(event, rowEmulatinoObj)
           }
       });
     },400);
      //nectar addition end
      
          _.sortable({
          forcePlaceholderSize: !1,
          connectWith: !1,
         //nectar addition - edits sortable to not use wpb-content-wrapper
          // items: " > .wpb-content-wrapper > [data-tag=vc_row], > .wpb-content-wrapper > [data-tag=vc_section]",
          items: "> [data-tag=vc_row], > [data-tag=vc_section]",
          //nectar addition end
          handle: " > .vc_row .vc_move-vc_row, > .vc_controls .vc_element-move",
          cursor: "move",
          cursorAt: {
            top: 15, //nectar addition
            left: 0 //nectar addition
          },
          placeholder: "vc_placeholder-row",
          cancel: ".vc-non-draggable-row",
          helper: l.renderPlaceholder,
          start: function(e, t) {
              window.vc_iframe.startSorting(), t.placeholder.height(30), "vc_section" === t.item.data("tag") ? (i && i.sortable("destroy"), a && a.sortable("destroy"), o && o.sortable("destroy"), _.sortable("option", "connectWith", !1)) : _.sortable("option", "connectWith", ['[data-tag="vc_section"] > .vc_element-container']), _.sortable("refresh")
          },
          stop: function(e, t) {
              var a, o, i, n, c;
              l.stopSorting(), "vc_section" === (a = t.item.data("tag")) && (r(), s(), d()), _.sortable("option", "connectWith", !1), _.sortable("refresh"), o = window.parent.vc.map || !1, n = !0, (i = t.item.parents("[data-tag]:first").data("tag")) && (c = o[i].allowed_container_element || !0, window.parent.vc.checkRelevance(i, a) || (t.placeholder.removeClass("vc_hidden-placeholder"), p(this).sortable("cancel"), n = !1), o[a] === Object(o[a])) && ((!0 === o[a].is_container || !1 === o[a].is_container || "[object Boolean]" === toString.call(o[a].is_container)) && !0 === o[a].is_container || null != o[a].as_parent && "[object Array]" === Object.prototype.toString.call(o[a].as_parent) && 0 != o[a].as_parent) && !0 !== c && c !== a.replace(/_inner$/, "") && (t.placeholder.removeClass("vc_hidden-placeholder"), p(this).sortable("cancel"), n = !1), n && parent.vc.shortcodes.get(t.item.data("modelId")).view.parentChanged()
          },
          tolerance: "pointer",
          update: function(e, t) {
              parent.vc.app.saveRowOrder(e, t)
          }
      }), d = function() {
          o = p(".vc_element-container:not(.vc_section)").sortable({
              forcePlaceholderSize: !0,
              helper: l.renderPlaceholder,
              distance: 3,
              scroll: !0,
              scrollSensitivity: 70,
              cursor: "move",
              cursorAt: {
                top: 15, //nectar addition
                left: 0 //nectar addition
              },
              connectWith: ".vc_element-container:not(.vc_section)",
              items: "> [data-model-id]",
              cancel: ".vc-non-draggable",
              handle: ".vc_element-move",
              start: l.startSorting,
              /*nectar addition*/
              start:  function(event, ui) {
                vc_iframe.startSorting();
                },
              /*nectar addition end*/
              update: e.saveElementOrder,
               /* nectar addition
                    change: function(event, ui) {
                        ui.placeholder.height(30), ui.placeholder.width(ui.placeholder.parent().width())
                    }, */
              placeholder: "vc_placeholder",
              tolerance: "pointer",
              over: function(e, t) {
                /*nectar addition*/
                if(t.item.data("tag") == 'vc_row_inner') {
                    t.placeholder.removeClass('vc_placeholder');
                    t.placeholder.addClass('vc_placeholder-row');
                  } 
                  /*nectar addition end*/
                  var a = t.item.data("tag"),
                      o = window.parent.vc.map || !1,
                      i = t.placeholder.closest("[data-tag]").data("tag"),
                      n = void 0 === o[i].allowed_container_element || o[i].allowed_container_element;
                  t.placeholder.removeClass("vc_hidden-placeholder"), t.placeholder.css({
                      maxWidth: t.placeholder.parent().width()
                  }), a && o && (window.parent.vc.checkRelevance(i, a) || t.placeholder.addClass("vc_hidden-placeholder"), t.sender && (i = t.sender.closest(".vc_element").removeClass("vc_sorting-over")).find(".vc_element").length < 1 && i.addClass("vc_empty"), t.placeholder.closest(".vc_element").addClass("vc_sorting-over"), o[a] === Object(o[a])) && ((!0 === o[a].is_container || !1 === o[a].is_container || "[object Boolean]" === toString.call(o[a].is_container)) && !0 === o[a].is_container || null != o[a].as_parent && "[object Array]" === Object.prototype.toString.call(o[a].as_parent) && 0 != o[a].as_parent) && !0 !== n && n !== a.replace(/_inner$/, "") && t.placeholder.addClass("vc_hidden-placeholder")
              },
              out: function(e, t) {
                 /* nectar addition */
                 if(t.item.data("tag") == 'vc_row_inner') {
                    //padding when column contains inner rows
                     jQuery('.wpb_row .vc_vc_column > .wpb_column > .vc_column-inner').each(function(){
                       if(jQuery(this).find('.vc_element.vc_vc_row_inner').length > 0) {
                         jQuery(this).addClass('has-child-rows');
                       } else {
                          jQuery(this).removeClass('has-child-rows');
                       }
                       
                     });
                  }
                  /* nectar additoin end */
                  t.placeholder.removeClass("vc_hidden-placeholder"), t.placeholder.closest(".vc_element").removeClass("vc_sorting-over")
              },
              stop: function(e, t) {
                  var a = t.item.data("tag"),
                      o = window.parent.vc.map || !1,
                      i = t.item.parents("[data-tag]:first").data("tag"),
                      n = o[i].allowed_container_element || !0,
                      c = !0;

                    /*nectar addition*/
                    // on FE editor, vc row inner should not be able to be dragged into a vc_column_inner as it breaks markup.
                    if( i === 'vc_column_inner' && a === 'vc_row_inner') {
                        p(this).sortable("cancel");
                    }
                    /* nectar addition edn  */
                  window.parent.vc.checkRelevance(i, a) || (t.placeholder.removeClass("vc_hidden-placeholder"), p(this).sortable("cancel"), c = !1), o[a] === Object(o[a]) && ((!0 === o[a].is_container || !1 === o[a].is_container || "[object Boolean]" === toString.call(o[a].is_container)) && !0 === o[a].is_container || null != o[a].as_parent && "[object Array]" === Object.prototype.toString.call(o[a].as_parent) && 0 != o[a].as_parent) && !0 !== n && n !== a.replace(/_inner$/, "") && (t.placeholder.removeClass("vc_hidden-placeholder"), p(this).sortable("cancel"), c = !1), c && parent.vc.shortcodes.get(t.item.data("modelId")).view.parentChanged(), window.vc_iframe.stopSorting()
              }
          })
      }, s = function() {
          a = p(".wpb_row").sortable({
              forcePlaceholderSize: !0,
              tolerance: "pointer",
              /*nectar additon*/
              items: "> .span_12 > [data-tag=vc_column], > .span_12 > [data-tag=vc_column_inner], .full-page-inner > .container > .span_12 > [data-tag=vc_column], .full-page-inner > .span_12 > [data-tag=vc_column]",
              /*nectar addition end*/
              handle: "> .vc_controls .vc_move-vc_column",
              start: function(e, t) {
                  window.vc_iframe.startSorting();
                  var a = t.item.data("modelId"),
                      a = parent.vc.shortcodes.get(a),
                      a = a.view.convertSize(a.getParam("width"));
                  t.item.appendTo(t.item.parent().parent()), t.placeholder.addClass(a), t.placeholder.width(t.placeholder.width() - 4)
              },
              cursor: "move",
              cursorAt: {
                top: 15, //nectar addition
                left: 0 //nectar addition
              },
              stop: function(e, t) {
                  window.vc_iframe.stopSorting(e, t)
              },
              update: e.saveColumnOrder,
              placeholder: "vc_placeholder-column",
              helper: l.renderPlaceholder
          })
      }, (r = function() {
          i = p('[data-tag="vc_section"] > .vc_element-container').sortable({
              forcePlaceholderSize: !1,
              connectWith: [".vc-main-sortable-container", '[data-tag="vc_section"] > .vc_element-container'],
              items: '[data-tag="vc_row"]',
              handle: "> .vc_row .vc_move-vc_row",
              cursor: "move",
              cursorAt: {
                  top: 20,
                  left: 16
              },
              placeholder: "vc_placeholder-row",
              cancel: ".vc-non-draggable-row",
              helper: l.renderPlaceholder,
              start: function(e, t) {
                  window.vc_iframe.startSorting(), t.placeholder.height(30)
              },
              stop: function(e, t) {
                  var a, o = t.item.data("tag"),
                      i = window.parent.vc.map || !1,
                      n = t.item.parents("[data-tag]:first").data("tag"),
                      c = !0;
                  n && (a = i[n].allowed_container_element || !0, window.parent.vc.checkRelevance(n, o) || (t.placeholder.removeClass("vc_hidden-placeholder"), p(this).sortable("cancel"), c = !1), i[o] === Object(i[o])) && ((!0 === i[o].is_container || !1 === i[o].is_container || "[object Boolean]" === toString.call(i[o].is_container)) && !0 === i[o].is_container || null != i[o].as_parent && "[object Array]" === Object.prototype.toString.call(i[o].as_parent) && 0 != i[o].as_parent) && !0 !== a && a !== o.replace(/_inner$/, "") && (t.placeholder.removeClass("vc_hidden-placeholder"), p(this).sortable("cancel"), c = !1), c && parent.vc.shortcodes.get(t.item.data("modelId")).view.parentChanged(), l.stopSorting()
              },
              tolerance: "pointer",
              update: function(e, t) {
                  parent.vc.app.saveRowOrder(e, t)
              },
              over: function(e, t) {
                  var a = t.item.data("tag"),
                      o = window.parent.vc.map || !1,
                      i = t.placeholder.closest("[data-tag]").data("tag"),
                      n = void 0 === o[i].allowed_container_element || o[i].allowed_container_element;
                  t.placeholder.removeClass("vc_hidden-placeholder"), t.placeholder.css({
                      maxWidth: t.placeholder.parent().width()
                  }), a && o && (window.parent.vc.checkRelevance(i, a) || t.placeholder.addClass("vc_hidden-placeholder"), t.sender && (i = t.sender.closest(".vc_element").removeClass("vc_sorting-over")).find(".vc_element").length < 1 && i.addClass("vc_empty"), t.placeholder.closest(".vc_element").addClass("vc_sorting-over"), o[a] === Object(o[a])) && ((!0 === o[a].is_container || !1 === o[a].is_container || "[object Boolean]" === toString.call(o[a].is_container)) && !0 === o[a].is_container || null != o[a].as_parent && "[object Array]" === Object.prototype.toString.call(o[a].as_parent) && 0 != o[a].as_parent) && !0 !== n && n !== a.replace(/_inner$/, "") && t.placeholder.addClass("vc_hidden-placeholder")
              },
              out: function(e, t) {
                  t.placeholder.removeClass("vc_hidden-placeholder"), t.placeholder.closest(".vc_element").removeClass("vc_sorting-over")
              }
          })
      })(), d(), s(), _.disableSelection(), _.on("mouseenter", "select", function() {
          _.enableSelection()
      }), _.on("mouseleave", "select", function() {
          _.disableSelection()
      }), _.on("focus", 'input[type="text"],textarea', function() {
          _.enableSelection()
      }), _.on("blur", 'input[type="text"],textarea', function() {
          _.disableSelection()
      }), e.setFrameSize(), p("#vc_load-new-js-block").appendTo("body")
  }, window.vc_iframe.loadCustomCss = function(e) {
      vc_iframe.$custom_style || (p("[data-type=vc_custom-css]").remove(), window.vc_iframe.$custom_style = p('<style class="vc_post_custom_css_style"></style>').appendTo("body")), window.vc_iframe.$custom_style.html(e.replace(/(<([^>]+)>)/gi, ""))
  }, window.vc_iframe.loadCustomJsHeader = function(e) {
      var t = p("[data-type=vc_custom-js-header]");
      t.length && e ? (t.empty(), t.html(e)) : e ? window.vc_iframe.$custom_js_footer = p('<script data-type="vc_custom-js-header">' + e + "<\/script>").appendTo("head") : t.remove()
  }, window.vc_iframe.loadCustomJsFooter = function(e) {
      var t = p("[data-type=vc_custom-js-footer]");
      t.length ? (t.empty(), t.html(e)) : e ? window.vc_iframe.$custom_js_footer = p('<script data-type="vc_custom-js-footer">' + e + "<\/script>").appendTo("body") : t.remove()
  }, window.vc_iframe.setCustomShortcodeCss = function(e) {
      this.$shortcodes_custom_css = p("body > [data-type=vc_shortcodes-custom-css]"), this.$shortcodes_custom_css.length || (this.$shortcodes_custom_css = p('<style data-type="vc_shortcodes-custom-css"></style>').prependTo("body")), this.$shortcodes_custom_css.append(e)
  }, window.vc_iframe.setDefaultShortcodeCss = function(e, t) {
      this.$shortcodes_custom_css = p("head > [data-type=vc_shortcodes-default-css]"), this.$shortcodes_custom_css.length || (this.$shortcodes_custom_css = p('<style data-type="vc_shortcodes-default-css"></style>').prependTo("head"));
      var a = this.$shortcodes_custom_css[0].innerHTML;
      a && -1 !== a.indexOf(t) || this.$shortcodes_custom_css.append(e)
  }, window.vc_iframe.addInlineScript = function(e) {
      return this.inline_scripts.push(e) - 1
  }, window.vc_iframe.addInlineScriptBody = function(e) {
      return this.inline_scripts_body.push(e) - 1
  }, window.vc_iframe.loadInlineScripts = function() {
      for (var e = 0; this.inline_scripts[e];) p(this.inline_scripts[e]).insertAfter(".js_placeholder_" + e), p(".js_placeholder_" + e).remove(), e++;
      this.inline_scripts = []
  }, window.vc_iframe.loadInlineScriptsBody = function() {
      for (var e = 0; this.inline_scripts_body[e];) p(this.inline_scripts_body[e]).insertAfter(".js_placeholder_inline_" + e), p(".js_placeholder_inline_" + e).remove(), e++;
      this.inline_scripts_body = []
  }, window.vc_iframe.allowedLoadScript = function(e) {
      var t, a, o, i = [],
          n = [];
      if (e.match(/load\-scripts\.php/)) {
          for (t in i = (a = e.match(/load%5B%5D=([^&]+)/)[1]) ? a.split(",") : i) o = "load-script:" + i[t], vc_iframe.loaded_script[window.parent.vc_globalHashCode(o)] || (window.vc_iframe.loaded_script[window.parent.vc_globalHashCode(o)] = o, n.push(i[t]));
          return !!n.length && e.replace(/load%5B%5D=[^&]+/, "load%5B%5D=" + n.join(","))
      }
      return !vc_iframe.loaded_script[window.parent.vc_globalHashCode(e)] && ((0 < e.indexOf("wp-includes/js/") || 0 < e.indexOf("wp-content/themes/")) && (window.vc_iframe.loaded_script[window.parent.vc_globalHashCode(e)] = e), e)
  }, window.vc_iframe.collectScriptsData = function() {
      p("script[src]").each(function() {
          var e = p(this).attr("src");
          window.vc_iframe.loaded_script[window.parent.vc_globalHashCode(e)] = e
      }), p("link[href]").each(function() {
          var e = p(this).attr("href");
          window.vc_iframe.loaded_styles[window.parent.vc_globalHashCode(e)] = e
      })
  }, p("body").removeClass("admin-bar"), p(document).ready(function() {
      p("#wpadminbar").hide(), p(".edit-link").hide(), window.parent.vc && !window.parent.vc.loaded && window.parent.vc.build && window.parent.vc.build()
  }), window.vc_iframe.reload = function() {
      for (var e in window.vc_iframe.reload_safety_call = !1, p("a:not(.control-btn),form").each(function() {
              p(this).attr("target", "_blank")
          }), this.collectScriptsData(), this.loadInlineScripts(), this.loadInlineScriptsBody(), this.activities_list) this.activities_list[e].call(window);
      return this.activities_list = [], window.setTimeout(function() {
          window.vc_teaserGrid(), window.vc_carouselBehaviour(), window.vc_prettyPhoto(), window.vc_googleplus(), window.vc_pinterest(), window.vc_progress_bar(), window.vc_rowBehaviour(), window.vc_waypoints(), window.vc_gridBehaviour(), window.vc_googleMapsPointer(), p(window).trigger("vc_reload"), p(window).trigger("resize")
      }, 10), !0
  }, window.vc_iframe.addScripts = function(e) {
      window.vc_iframe.scripts_to_wait = e.length, window.vc_iframe.scripts_to_load = e
  }, 
   /* Nectar addition */
  window.vc_iframe.addStyles = function($elements) {
       
     var $trimmedStyles = Array.from($elements);

     $trimmedStyles = $trimmedStyles.filter(function(el) {

       if(el && el.hasAttribute('id')) {

         if( el.getAttribute('id') == 'dynamic-css-inline-css' ||
             el.getAttribute('id') == 'wp-mediaelement-inline-css' ||
             el.getAttribute('id') == 'main-styles-inline-css' ) {
               return false;
         }
         
       }
       return true;
     });

     $trimmedStyles.forEach(function(style){
       window.jQuery("body").append(style);
     });

  }, 
   /* Nectar addition end */
  window.vc_iframe.loadScripts = function() {
      vc_iframe.scripts_to_wait && vc_iframe.scripts_to_load ? (window.vc_iframe.scripts_to_load.each(function() {
          var e = p(this);
          // Nectar addition.
          var $element = jQuery(this);
          // Nectar addition end
          if (window.vc_iframe.reload_safety_call = !0, e.is("script")) {
              var t = e.attr("src");
              if (t)(t = vc_iframe.allowedLoadScript(t)) ? p.getScript(t, function() {
                  --window.vc_iframe.scripts_to_wait, vc_iframe.scripts_to_wait < 1 && window.vc_iframe.reload()
              }) : (--window.vc_iframe.scripts_to_wait, vc_iframe.scripts_to_wait < 1 && window.vc_iframe.reload());
              else {
                  try {
                       // Nectar addition.
                       var skip = false;

                       if( $element[0] && $element[0].hasAttribute('id') ) {
                         var id = $element[0].getAttribute('id');
                         if(id == 'nectar-frontend-js-extra' || 
                            id == 'salient-portfolio-js-js-extra' || 
                            id == 'nectar-slider-js-extra') {
                             skip = true;
                         }
                       }
 
                       if( !skip ) {
                         window.jQuery("body").append($element);
                       }
                       // Nectar addition end.
                  } catch (e) {
                      window.console && window.console.warn && window.console.warn("loadScripts error", e)
                  }--window.vc_iframe.scripts_to_wait, vc_iframe.scripts_to_wait < 1 && vc_iframe.reload()
              }
          } else {
              t = e.attr("href");
              t && !vc_iframe.loaded_styles[window.parent.vc_globalHashCode(t)] && window.jQuery("body").append(e), --window.vc_iframe.scripts_to_wait, vc_iframe.scripts_to_wait < 1 && window.vc_iframe.reload()
          }
      }), window.vc_iframe.scripts_to_load = !1, p(document).ajaxComplete(function(e) {
          p(e.currentTarget).off("ajaxComplete"), window.vc_iframe.scripts_to_wait || vc_iframe.reload()
      }), window.setTimeout(function() {
          !0 === vc_iframe.reload_safety_call && vc_iframe.reload()
      }, 14e3)) : window.vc_iframe.reload()
  }, window.vc_iframe.destroyTabs = function(e) {
      e.each(function() {
          p(this).find(".wpb_tour_tabs_wrapper").tabs("destroy")
      })
  }, window.vc_iframe.buildTabs = function(e, i) {
      var t = p.ui.version.split("."),
          n = 1 === parseInt(t[0], 10) && parseInt(t[1], 10) < 9;
      return e.each(function(e) {
          p(this).attr("data-interval");
          var a, t = [],
              o = p(this).find(".wpb_tour_tabs_wrapper");
          o.hasClass("ui-widget") ? (i = !1 !== i ? i : o.tabs("option", "active"), a = o.tabs("refresh"), o.tabs("option", "active", i)) : a = p(this).find(".wpb_tour_tabs_wrapper").tabs({
              active: 0,
              show: function(e, t) {
                  wpb_prepare_tab_content(e, t)
              },
              activate: function(e, t) {
                  wpb_prepare_tab_content(e, t)
              }
          }), p(this).find(".vc_element").each(function() {
              t.push(this.id)
          }), p(this).find(".wpb_prev_slide a, .wpb_next_slide a").off("click").on("click", function(e) {
              var t;
              e && e.preventDefault && e.preventDefault(), n ? (t = a.tabs("option", "selected"), p(this).parent().hasClass("wpb_next_slide") ? t++ : t--, t < 0 ? t = a.tabs("length") - 1 : t >= a.tabs("length") && (t = 0), a.tabs("select", t)) : (t = a.tabs("option", "active"), e = a.find(".wpb_tab").length, t = p(this).parent().hasClass("wpb_next_slide") ? e <= t + 1 ? 0 : t + 1 : t - 1 < 0 ? e - 1 : t - 1, a.tabs("option", "active", t))
          })
      }), !0
  }, window.vc_iframe.setActiveTab = function(e, t) {
      e.each(function() {
          p(this).find(".wpb_tour_tabs_wrapper").tabs("refresh"), p(this).find(".wpb_tour_tabs_wrapper").tabs("option", "active", t)
      })
  }, 
/* nectar addition */
  window.vc_iframe.setTabsSorting = function(view) {
    var $controls = jQuery(view.tabsControls().get(0));
    if(view.$el && jQuery(view.$el).find('.tabbed[data-style*="vertical"]').length > 0 ) {
      var $nectarTabbedAxis = "y";
    } else {
      var $nectarTabbedAxis = "x";
    }
   
    if( $controls.parents('[data-style="toggle_button"]').length == 0  ) {
      $controls.hasClass("ui-sortable") && $controls.sortable("destroy"), $controls.sortable({
          axis: $nectarTabbedAxis, //nectar addition
          update: view.stopSorting,
          items: "> li:not(.add_tab_block)"
      }), navigator.userAgent.toLowerCase().match(/firefox/) && ($controls.bind("sortstart", function(event, ui) {
          ui.helper.css("margin-top", jQuery(window).scrollTop())
      }), $controls.bind("sortbeforestop", function(event, ui) {
          ui.helper.css("margin-top", 0)
      }))
     }
  
  }, 
   /* nectar addition end */
  window.vc_iframe.buildAccordion = function(e, n) {
      e.each(function(e) {
          var t = p(this),
              a = t.find(".wpb_accordion_wrapper"),
              o = (t.attr("data-interval"), !isNaN(t.data("active-tab")) && 0 < parseInt(t.data("active-tab"), 10) && parseInt(t.data("active-tab"), 10) - 1),
              i = !1 === o || "yes" === t.data("collapsible");
          a.hasClass("ui-widget") ? (!1 === n && (n = a.accordion("option", "active")), a.accordion("refresh"), a.accordion("option", "active", n)) : t.find(".wpb_accordion_wrapper").accordion({
              create: function(e, t) {
                  t.panel.parent().parent().addClass("vc_active-accordion-tab")
              },
              header: "> .vc_element > div > h3",
              autoHeight: !1,
              heightStyle: "content",
              active: o,
              collapsible: i,
              navigation: !0,
              activate: function(e, t) {
                  vc_accordionActivate(e, t), t.oldPanel.parent().parent().removeClass("vc_active-accordion-tab"), t.newPanel.parent().parent().addClass("vc_active-accordion-tab")
              },
              change: function(e, t) {
                  void 0 !== p.fn.isotope && t.newContent.find(".isotope").isotope("layout"), window.vc_carouselBehaviour()
              }
          })
      })
  }, 
  /*nectar additon*/
  window.vc_iframe.setAccordionSorting = function(view) {
    
     var widthStorage = 200;
          
     function setSortableWidth(container){
       var itemLength = parseInt(container.find('> *').length);
       var containerWidth = container.width();
       container.find('> *').css({
         'width' : (containerWidth/itemLength) -5 +'px'
       });
     }
     
     //jQuery(view.$accordion.find("> .wpb_accordion_wrapper").get(0)).sortable({
     if(view.$accordion.hasClass('toggles')) {
       jQuery(view.$accordion.get(0)).sortable({
           handle: ".vc_move-toggle",
           update: view.stopSorting,
           placeholder: "vc_placeholder-accord"
       });
     }  else if( view.$accordion.hasClass('clients')) {
       jQuery(view.$accordion.get(0)).sortable({
           handle: ".vc_move-client",
           update: view.stopSorting,
           placeholder: "vc_placeholder-accord"
       });
     }  else if( view.$accordion.hasClass('page-submenu')) {
       jQuery(view.$accordion.get(0)).find('ul').sortable({
           handle: ".vc_move-page_link",
           update: view.stopSorting,
           placeholder: "vc_placeholder-accord"
       });
     } else if( view.$accordion.hasClass('pricing-table')) {
       jQuery(view.$accordion.get(0)).sortable({
           handle: ".vc_move-pricing_column",
           update: view.stopSorting,
           placeholder: "vc_placeholder-accord"
       });
     } 
     else if( view.$accordion.hasClass('nectar-icon-list')) {
       jQuery(view.$accordion.get(0)).sortable({
           handle: ".vc_move-nectar_icon_list_item",
           update: view.stopSorting,
           placeholder: "vc_placeholder-accord"
       });
     } 
     else if( view.$accordion.hasClass('slides') || view.$accordion.hasClass('flickity-slider') && view.$accordion.parents('.nectar-carousel').length === 0) {
       jQuery(view.$accordion.get(0)).sortable({
           handle: ".vc_move-testimonial",
           tolerance: "pointer",
           update: view.stopSorting,
           cursorAt: {
             top: 25,
             left: 0
           },
           axis: "x",
           placeholder: "vc_placeholder-accord",
           start: function(event, ui) {
             ui.helper.parent().addClass('nectar-sortable-block-display');
              
              //store width before changing
              widthStorage = ui.helper.parent().find('> *:first-child').outerWidth();
              
              //set widths equal to child length
              setSortableWidth(ui.helper.parent());
              
             jQuery(this).sortable('refreshPositions');
                               
           },
           stop: function(event, ui) {
             ui.item.parent().removeClass('nectar-sortable-block-display');
             
             ui.item.parent().find('> *').css('width',widthStorage+'px');
             
             //needed to reset order in flickity
             vc_iframe.reload();
           }
       });
     } else if( view.$accordion.hasClass('owl-stage') || view.$accordion.hasClass('flickity-slider') && view.$accordion.parents('.nectar-carousel').length > 0) {
       
       jQuery(view.$accordion.get(0)).sortable({
           handle: ".vc_move-item",
           tolerance: "pointer",
           update: view.stopSorting,
           cursorAt: {
             top: 25,
             left: 0
           },
           axis: "x",
           placeholder: "vc_placeholder-accord",
           start: function(event, ui) {
             ui.helper.parent().addClass('nectar-sortable-block-display');
              
              //store width before changing
              widthStorage = ui.helper.parent().find('> *:first-child').outerWidth();
              
              //set widths equal to child length
              setSortableWidth(ui.helper.parent());
              
             jQuery(this).sortable('refreshPositions');
                               
           },
           stop: function(event, ui) {
             ui.item.parent().removeClass('nectar-sortable-block-display');
             
             ui.item.parent().find('> *').css('width',widthStorage+'px');
             
             //needed to reset order in flickity
             vc_iframe.reload();
           }
       });
     } 
     
  }, 
  /*nectar additon end*/
  window.vc_iframe.vc_imageCarousel = function(e) {
      var t = p("[data-model-id=" + e + "]"),
          t = (t.find("img").length, t.find('[data-ride="vc_carousel"]'));
      !t.find("img:first").length || t.find("img:first").prop("complete") ? t.carousel(t.data()) : window.setTimeout(function() {
          window.vc_iframe.vc_imageCarousel(e)
      }, 500)
  }, window.vc_iframe.vc_gallery = function(e) {
      var t = p("[data-model-id=" + e + "]").find(".wpb_gallery_slides");
      t.find("img:first").prop("complete") ? this.gallerySlider(t) : window.setTimeout(function() {
          window.vc_iframe.vc_gallery(e)
      }, 500)
  }, window.vc_iframe.vc_postsSlider = function(e) {
      e = p("[data-model-id=" + e + "]").find(".wpb_gallery_slides");
      this.gallerySlider(e)
  }, window.vc_iframe.gallerySlider = function(e) {
      var t, a, o, i;
      e.hasClass("wpb_flexslider") ? (t = 1e3 * parseInt(e.attr("data-interval"), 10), a = e.attr("data-flex_fx"), o = !0, e.flexslider({
          animation: a,
          slideshow: o = 0 === t ? !1 : o,
          slideshowSpeed: t,
          sliderSpeed: 800,
          smoothHeight: !0
      }), e.addClass("loaded")) : e.hasClass("wpb_slider_nivo") ? (0 === (t = 1e3 * e.attr("data-interval")) && (t = 9999999999), e.find(".nivoSlider").nivoSlider({
          effect: "boxRainGrow,boxRain,boxRainReverse,boxRainGrowReverse",
          slices: 15,
          boxCols: 8,
          boxRows: 4,
          animSpeed: 800,
          pauseTime: t,
          startSlide: 0,
          directionNav: !0,
          directionNavHide: !0,
          controlNav: !0,
          keyboardNav: !1,
          pauseOnHover: !0,
          manualAdvance: !1,
          prevText: "Prev",
          nextText: "Next"
      })) : e.hasClass("wpb_image_grid") && (p.fn.imagesLoaded ? i = e.find(".wpb_image_grid_ul").imagesLoaded(function() {
          i.isotope({
              itemSelector: ".isotope-item",
              layoutMode: "fitRows"
          })
      }) : e.find(".wpb_image_grid_ul").isotope({
          itemSelector: ".isotope-item",
          layoutMode: "fitRows"
      }))
  }, window.vc_iframe.vc_toggle = function(e) {
      e = p("[data-model-id=" + e + "]");
      window.vc_toggleBehaviour(e)
  }, window.vc_iframe.vc_tta_toggle = function(e) {
      e = p("[data-model-id=" + e + "]");
      window.vc_ttaToggleBehaviour(e)
  }, window.vc_iframe.gridInit = function(e) {
      var t, e = p("[data-model-id=" + e + "] [data-vc-grid-settings]");
      e.find(".vc_grid-loading:visible").length || ((t = e.data("vcGrid")) ? (e.empty(), t.init()) : e.vcGrid())
  }, window.vc_iframe.updateChildGrids = function(e) {
      p("[data-model-id=" + e + "] [data-vc-grid-settings]").each(function() {
          var e = p(this),
              t = p(this).data("vcGrid");
          !e.find(".vc_grid-loading:visible").length && t && (e.empty(), t.init())
      })
  }, window.vc_iframe.buildTTA = function() {
      p("[data-vc-accordion]:not(.vc_is-ready-fe)").on("show.vc.accordion", function(e) {
          var t = {};
          t.newPanel = p(this).data("vc.accordion").getTarget(), window.wpb_prepare_tab_content(e, t)
      }).addClass("vc_is-ready-fe")
  }, window.vc_iframe.vc_pieChart = function() {
      window.vc_pieChart(), window.setTimeout(function() {
          p(window).off("resize.vcPieChartEditable").on("resize.vcPieChartEditable", function() {
              p(".vc_pie_chart.vc_ready").vcChat()
          })
      }, 500)
  }, p(document).ready(function() {
      parent && parent.vc && !parent.vc.loaded && window.setTimeout(function() {
          parent.vc.build()
      }, 10)
  })
}(window.jQuery);
! function(o) {
var t = function(t, n, i) {
  this.target = t, this.$pointer = null, this.texts = i, this.pointerOptions = n, this.init()
};
t.prototype = {
  init: function() {
      _.bindAll(this, "openedEvent", "reposition")
  },
  show: function() {
      this.$pointer = o(this.target), this.$pointer.data("vcPointerMessage", this), this.pointerOptions.opened = this.openedEvent, this.$pointer.addClass("vc-with-vc-pointer").pointer(this.pointerOptions).pointer("open"), o(window).on("resize.vcPointer", this.reposition)
  },
  domButtonsWrapper: function() {
      return o('<div class="vc_wp-pointer-controls" />')
  },
  domCloseBtn: function() {
      return o('<a class="vc_pointer-close close">' + this.texts.finish + "</a>")
  },
  domNextBtn: function() {
      return o('<button class="button button-primary button-large vc_wp-pointers-next">' + this.texts.next + '<i class="vc_pointer-icon"></i></button>')
  },
  domPrevBtn: function() {
      return o('<button class="button button-primary button-large vc_wp-pointers-prev"><i class="vc_pointer-icon"></i>' + this.texts.prev + "</button> ")
  },
  openedEvent: function(t, n) {
      var i = n.pointer.offset();
      n.pointer.css("z-index", 1e5), i && i.top && o("body").scrollTop(80 < i.top ? i.top - 80 : 0)
  },
  reposition: function() {
      this.$pointer.pointer("reposition")
  },
  close: function() {
      this.$pointer && this.$pointer.removeClass("vc-with-vc-pointer").pointer("close"), o(window).off("resize.vcPointer")
  }
}, window.vcPointerMessage = t
}(window.jQuery);