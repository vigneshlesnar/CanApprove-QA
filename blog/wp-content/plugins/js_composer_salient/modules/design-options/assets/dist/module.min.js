jQuery(document).ready(function(i){function r(e,o,n,s){s&&i(".vc_atm-message").remove();var t=i('<div class="vc_atm-message '+(o||"")+'" style="display: none;"><p></p></div>');return t.find("p").text(e),_.isUndefined(n)||window.setTimeout(function(){t.fadeOut(500,function(){i(this).remove()})},n),t}i(".color-control").wpColorPicker(),i("#vc_settings-color-restore-default").on("click",function(e){e.preventDefault(),confirm(window.i18nLocaleSettings.are_you_sure_reset_color)&&(i("#vc_settings-color-action").val("restore_color"),i("#vc_settings-color").attr("action",window.location.href).find("[type=submit]").click())}),i("#wpb_js_use_custom").on("change",function(){this.checked?i("#vc_settings-color").addClass("color_enabled"):i("#vc_settings-color").removeClass("color_enabled")});var a=!1;i("#vc_settings-color").on("submit",function(e){var o,n,s,t;e.preventDefault(),a||(t=i("#submit_btn"),i("#wpb_js_use_custom").prop("checked")&&"restore_color"!==i("#vc_settings-color-action").val()?(a=!0,o=i(this).serializeArray(),n=t.data("vc-less-variables"),s=i('<span class="vc_settings-spinner vc_ui-wp-spinner"></span>'),t.val(window.i18nLocaleSettings.saving),s.insertBefore(t).show(),_.delay(function(){vc.less.build({modifyVars:o,variablesDataLinker:n,lessPath:t.data("vc-less-path"),rootpath:t.data("vc-less-root")},function(e,o){_.isUndefined(e)||_.isUndefined(e.css)?_.isUndefined(o)||(window.console&&window.console.warn&&window.console.warn("build error",o),r(window.i18nLocaleSettings.save_error+". "+o,"error",void 0,!0).insertBefore(t.parent()).fadeIn(500),t.val(window.i18nLocaleSettings.save),a=!1,s.remove()):(i('[name="wpb_js_compiled_js_composer_less"]').val(e.css),o=i("#vc_settings-color"),i.ajax({type:"POST",url:o.attr("action"),data:o.eq(0).serializeArray(),success:function(){r(window.i18nLocaleSettings.saved,"updated",5e3,!0).insertBefore(t.parent()).fadeIn(500),t.val(window.i18nLocaleSettings.save),a=!1,s.remove()},error:function(){r(window.i18nLocaleSettings.form_save_error,"error",void 0,!0).insertBefore(t.parent()).fadeIn(500),t.val(window.i18nLocaleSettings.save),a=!1,s.remove()}}))})},100)):this.submit())})});